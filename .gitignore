# Etapa 1: Construir la aplicaci√≥n
FROM maven:3.8-openjdk-17 AS build
WORKDIR /app
# Copia solo la carpeta del proyecto del backend al contenedor
COPY ./teloapp-backend .
RUN mvn clean install -DskipTests

# Etapa 2: Crear la imagen final
FROM openjdk:17-jre-slim
WORKDIR /app
# Copia el .jar construido desde la carpeta target del backend
COPY --from=build /app/target/teloapp-backend-0.0.1-SNAPSHOT.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]